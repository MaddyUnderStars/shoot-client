{"openapi":"3.0.0","info":{"version":"1.0.0","title":"Client to Server API"},"servers":[{"url":"https://chat.understars.dev"}],"components":{"securitySchemes":{"bearerAuth":{"type":"http","scheme":"bearer","bearerFormat":"JWT"}},"schemas":{"HttpError":{"type":"object","properties":{"message":{"type":"string"},"code":{"type":"number"}},"required":["message","code"]},"PublicUser":{"type":"object","properties":{"id":{"type":"string"},"name":{"type":"string"},"summary":{"type":"string"},"display_name":{"type":"string"},"domain":{"type":"string"}},"required":["id","name","summary","display_name","domain"]},"PrivateUser":{"allOf":[{"$ref":"#/components/schemas/PublicUser"},{"type":"object","properties":{"email":{"type":"string"}},"required":["email"]}]},"PublicGuildTextChannel":{"type":"object","properties":{"id":{"type":"string"},"name":{"type":"string"},"domain":{"type":"string"},"guild_id":{"type":"string"}},"required":["id","name","domain"]},"PublicGuild":{"type":"object","properties":{"id":{"type":"string"},"name":{"type":"string"},"domain":{"type":"string"},"channels":{"type":"array","items":{"$ref":"#/components/schemas/PublicGuildTextChannel"}},"roles":{"type":"array","items":{"type":"object","properties":{"id":{"type":"string"},"name":{"type":"string"},"allow":{"type":"array","items":{"type":"number"}},"deny":{"type":"array","items":{"type":"number"}},"guild_id":{"type":"string"}},"required":["id","name","allow","deny"]}}},"required":["id","name","domain"]},"PublicChannel":{"type":"object","properties":{"id":{"type":"string"},"name":{"type":"string"},"domain":{"type":"string"}},"required":["id","name","domain"]},"PrivateRelationship":{"type":"object","properties":{"created":{"type":"string"},"user":{"$ref":"#/components/schemas/PublicUser"},"type":{"type":"integer","enum":[0,1,2]}},"required":["created","user","type"]},"PublicMessage":{"type":"object","properties":{"id":{"type":"string"},"content":{"type":"string"},"published":{"type":"string"},"updated":{"type":"string"},"author_id":{"type":"string"},"channel_id":{"type":"string"}},"required":["id","content","published","updated","author_id","channel_id"]}},"parameters":{}},"paths":{"/nodeinfo/2.0.json/":{"get":{"responses":{"200":{"description":"","content":{"application/json":{"schema":{"type":"object","properties":{"version":{"type":"string"},"software":{"type":"object","properties":{"name":{"type":"string"},"version":{"type":"string"},"homepage":{"type":"string"}},"required":["name","version","homepage"]},"protocols":{"type":"array","items":{"type":"string"}},"openRegistrations":{"type":"boolean"},"metadata":{"type":"object","properties":{}}},"required":["version","software","protocols","openRegistrations","metadata"]}}}},"401":{"description":"","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HttpError"}}}},"404":{"description":"","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HttpError"}}}},"500":{"description":"","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HttpError"}}}}}}},"/auth/register":{"post":{"requestBody":{"content":{"application/json":{"schema":{"type":"object","properties":{"username":{"type":"string"},"password":{"type":"string"},"email":{"type":"string"}},"required":["username","password"]}}}},"responses":{"200":{"description":"","content":{"application/json":{"schema":{"type":"object","properties":{"token":{"type":"string"}},"required":["token"]}}}},"401":{"description":"","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HttpError"}}}},"404":{"description":"","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HttpError"}}}},"500":{"description":"","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HttpError"}}}}}}},"/auth/login":{"post":{"requestBody":{"content":{"application/json":{"schema":{"type":"object","properties":{"username":{"type":"string"},"password":{"type":"string"}},"required":["username","password"]}}}},"responses":{"200":{"description":"","content":{"application/json":{"schema":{"type":"object","properties":{"token":{"type":"string"},"user":{"$ref":"#/components/schemas/PublicUser"}},"required":["token","user"]}}}},"401":{"description":"","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HttpError"}}}},"404":{"description":"","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HttpError"}}}},"500":{"description":"","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HttpError"}}}}}}},"/invite/{invite_code}":{"post":{"security":[{"bearerAuth":[]}],"parameters":[{"schema":{"type":"string"},"required":true,"name":"invite_code","in":"path"}],"responses":{"200":{"description":"","content":{"application/json":{"schema":{"type":"object","properties":{}}}}},"401":{"description":"","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HttpError"}}}},"404":{"description":"","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HttpError"}}}},"500":{"description":"","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HttpError"}}}}}},"delete":{"security":[{"bearerAuth":[]}],"parameters":[{"schema":{"type":"string"},"required":true,"name":"invite_code","in":"path"}],"responses":{"200":{"description":"","content":{"application/json":{"schema":{"type":"object","properties":{}}}}},"401":{"description":"","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HttpError"}}}},"404":{"description":"","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HttpError"}}}},"500":{"description":"","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HttpError"}}}}}}},"/users/@me/":{"get":{"security":[{"bearerAuth":[]}],"responses":{"200":{"description":"","content":{"application/json":{"schema":{"$ref":"#/components/schemas/PrivateUser"}}}},"401":{"description":"","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HttpError"}}}},"404":{"description":"","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HttpError"}}}},"500":{"description":"","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HttpError"}}}}}},"patch":{"security":[{"bearerAuth":[]}],"requestBody":{"content":{"application/json":{"schema":{"type":"object","properties":{"display_name":{"type":"string"},"summary":{"type":"string"},"email":{"type":"string","format":"email"}},"additionalProperties":false}}}},"responses":{"200":{"description":"","content":{"application/json":{"schema":{"type":"object","properties":{}}}}},"401":{"description":"","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HttpError"}}}},"404":{"description":"","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HttpError"}}}},"500":{"description":"","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HttpError"}}}}}}},"/users/@me/guild/":{"get":{"security":[{"bearerAuth":[]}],"responses":{"200":{"description":"","content":{"application/json":{"schema":{"type":"array","items":{"$ref":"#/components/schemas/PublicGuild"}}}}},"401":{"description":"","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HttpError"}}}},"404":{"description":"","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HttpError"}}}},"500":{"description":"","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HttpError"}}}}}}},"/users/@me/guild/{guild_id}":{"delete":{"security":[{"bearerAuth":[]}],"parameters":[{"schema":{"type":"string"},"required":true,"name":"guild_id","in":"path"}],"responses":{"200":{"description":"","content":{"application/json":{"schema":{"type":"object","properties":{}}}}},"401":{"description":"","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HttpError"}}}},"404":{"description":"","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HttpError"}}}},"500":{"description":"","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HttpError"}}}}}}},"/users/@me/channels/":{"get":{"security":[{"bearerAuth":[]}],"responses":{"200":{"description":"","content":{"application/json":{"schema":{"type":"array","items":{"$ref":"#/components/schemas/PublicChannel"}}}}},"401":{"description":"","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HttpError"}}}},"404":{"description":"","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HttpError"}}}},"500":{"description":"","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HttpError"}}}}}}},"/users/{user_id}/":{"get":{"security":[{"bearerAuth":[]}],"parameters":[{"schema":{"type":"string"},"required":true,"name":"user_id","in":"path"}],"responses":{"200":{"description":"","content":{"application/json":{"schema":{"$ref":"#/components/schemas/PublicUser"}}}},"401":{"description":"","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HttpError"}}}},"404":{"description":"","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HttpError"}}}},"500":{"description":"","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HttpError"}}}}}}},"/users/{user_id}/channels/":{"post":{"security":[{"bearerAuth":[]}],"parameters":[{"schema":{"type":"string"},"required":true,"name":"user_id","in":"path"}],"requestBody":{"content":{"application/json":{"schema":{"type":"object","properties":{"name":{"type":"string"}},"required":["name"]}}}},"responses":{"200":{"description":"","content":{"application/json":{"schema":{"$ref":"#/components/schemas/PublicChannel"}}}},"401":{"description":"","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HttpError"}}}},"404":{"description":"","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HttpError"}}}},"500":{"description":"","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HttpError"}}}}}}},"/users/{user_id}/relationship/":{"get":{"security":[{"bearerAuth":[]}],"parameters":[{"schema":{"type":"string"},"required":true,"name":"user_id","in":"path"}],"responses":{"200":{"description":"","content":{"application/json":{"schema":{"$ref":"#/components/schemas/PrivateRelationship"}}}},"401":{"description":"","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HttpError"}}}},"404":{"description":"","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HttpError"}}}},"500":{"description":"","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HttpError"}}}}}},"post":{"security":[{"bearerAuth":[]}],"parameters":[{"schema":{"type":"string"},"required":true,"name":"user_id","in":"path"}],"requestBody":{"content":{"application/json":{"schema":{"type":"object","properties":{"type":{"anyOf":[{"type":"string","enum":["blocked"]},{"type":"string","enum":["pending"]}]}}}}}},"responses":{"200":{"description":"","content":{"application/json":{"schema":{"$ref":"#/components/schemas/PrivateRelationship"}}}},"401":{"description":"","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HttpError"}}}},"404":{"description":"","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HttpError"}}}},"500":{"description":"","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HttpError"}}}}}},"delete":{"security":[{"bearerAuth":[]}],"parameters":[{"schema":{"type":"string"},"required":true,"name":"user_id","in":"path"}],"responses":{"200":{"description":"","content":{"application/json":{"schema":{"type":"object","properties":{}}}}},"401":{"description":"","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HttpError"}}}},"404":{"description":"","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HttpError"}}}},"500":{"description":"","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HttpError"}}}}}}},"/guild/":{"post":{"security":[{"bearerAuth":[]}],"requestBody":{"content":{"application/json":{"schema":{"type":"object","properties":{"name":{"type":"string","minLength":1}},"required":["name"]}}}},"responses":{"200":{"description":"","content":{"application/json":{"schema":{"$ref":"#/components/schemas/PublicGuild"}}}},"401":{"description":"","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HttpError"}}}},"404":{"description":"","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HttpError"}}}},"500":{"description":"","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HttpError"}}}}}}},"/guild/{guild_id}/":{"get":{"security":[{"bearerAuth":[]}],"parameters":[{"schema":{"type":"string"},"required":true,"name":"guild_id","in":"path"}],"responses":{"200":{"description":"","content":{"application/json":{"schema":{"$ref":"#/components/schemas/PublicGuild"}}}},"401":{"description":"","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HttpError"}}}},"404":{"description":"","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HttpError"}}}},"500":{"description":"","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HttpError"}}}}}},"delete":{"security":[{"bearerAuth":[]}],"parameters":[{"schema":{"type":"string"},"required":true,"name":"guild_id","in":"path"}],"responses":{"200":{"description":"","content":{"application/json":{"schema":{"type":"object","properties":{}}}}},"401":{"description":"","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HttpError"}}}},"404":{"description":"","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HttpError"}}}},"500":{"description":"","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HttpError"}}}}}}},"/guild/{guild_id}/invite":{"post":{"security":[{"bearerAuth":[]}],"parameters":[{"schema":{"type":"string"},"required":true,"name":"guild_id","in":"path"}],"requestBody":{"content":{"application/json":{"schema":{"type":"object","properties":{"expiry":{"type":"string","format":"date-time"}}}}}},"responses":{"200":{"description":"","content":{"application/json":{"schema":{"type":"object","properties":{}}}}},"401":{"description":"","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HttpError"}}}},"404":{"description":"","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HttpError"}}}},"500":{"description":"","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HttpError"}}}}}}},"/channel/{channel_id}/":{"get":{"security":[{"bearerAuth":[]}],"parameters":[{"schema":{"type":"string"},"required":true,"name":"channel_id","in":"path"}],"responses":{"200":{"description":"","content":{"application/json":{"schema":{"$ref":"#/components/schemas/PublicChannel"}}}},"401":{"description":"","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HttpError"}}}},"404":{"description":"","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HttpError"}}}},"500":{"description":"","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HttpError"}}}}}},"patch":{"security":[{"bearerAuth":[]}],"parameters":[{"schema":{"type":"string"},"required":true,"name":"channel_id","in":"path"}],"requestBody":{"content":{"application/json":{"schema":{"type":"object","properties":{"name":{"type":"string"}},"required":["name"]}}}},"responses":{"200":{"description":"","content":{"application/json":{"schema":{"type":"object","properties":{}}}}},"401":{"description":"","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HttpError"}}}},"404":{"description":"","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HttpError"}}}},"500":{"description":"","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HttpError"}}}}}}},"/channel/{channel_id}/messages/":{"post":{"security":[{"bearerAuth":[]}],"parameters":[{"schema":{"type":"string"},"required":true,"name":"channel_id","in":"path"}],"requestBody":{"content":{"application/json":{"schema":{"type":"object","properties":{"content":{"type":"string"}},"required":["content"]}}}},"responses":{"200":{"description":"","content":{"application/json":{"schema":{"$ref":"#/components/schemas/PublicMessage"}}}},"401":{"description":"","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HttpError"}}}},"404":{"description":"","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HttpError"}}}},"500":{"description":"","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HttpError"}}}}}},"get":{"security":[{"bearerAuth":[]}],"parameters":[{"schema":{"type":"string"},"required":true,"name":"channel_id","in":"path"},{"schema":{"type":"number","maximum":50,"minimum":1,"default":50},"required":false,"name":"limit","in":"query"},{"schema":{"anyOf":[{"type":"string","enum":["ASC"]},{"type":"string","enum":["DESC"]}]},"required":false,"name":"order","in":"query"},{"schema":{"type":"string"},"required":false,"name":"after","in":"query"},{"schema":{"type":"string"},"required":false,"name":"before","in":"query"},{"schema":{"type":"string"},"required":false,"name":"around","in":"query"},{"schema":{"type":"string"},"required":false,"name":"query","in":"query"}],"responses":{"200":{"description":"","content":{"application/json":{"schema":{"type":"array","items":{"$ref":"#/components/schemas/PublicMessage"}}}}},"401":{"description":"","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HttpError"}}}},"404":{"description":"","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HttpError"}}}},"500":{"description":"","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HttpError"}}}}}}},"/channel/{channel_id}/call/":{"post":{"security":[{"bearerAuth":[]}],"parameters":[{"schema":{"type":"string"},"required":true,"name":"channel_id","in":"path"}],"responses":{"200":{"description":"","content":{"application/json":{"schema":{"type":"object","properties":{"token":{"type":"string"},"ip":{"type":"string"}},"required":["token","ip"]}}}},"202":{"description":"","content":{"application/json":{"schema":{"type":"string","enum":["Accepted"]}}}},"401":{"description":"","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HttpError"}}}},"404":{"description":"","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HttpError"}}}},"500":{"description":"","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HttpError"}}}}}}},"/channel/{channel_id}/messages/{message_id}/":{"get":{"security":[{"bearerAuth":[]}],"parameters":[{"schema":{"type":"string"},"required":true,"name":"channel_id","in":"path"},{"schema":{"type":"string"},"required":true,"name":"message_id","in":"path"}],"responses":{"200":{"description":"","content":{"application/json":{"schema":{"$ref":"#/components/schemas/PublicMessage"}}}},"401":{"description":"","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HttpError"}}}},"404":{"description":"","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HttpError"}}}},"500":{"description":"","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HttpError"}}}}}}}}}