{
	"openapi": "3.0.0",
	"info": {
		"version": "1.0.0",
		"title": "Client to Server API"
	},
	"servers": [
		{
			"url": "https://chat.understars.dev"
		}
	],
	"components": {
		"schemas": {
			"PublicUser": {
				"type": "object",
				"properties": {
					"name": {
						"type": "string"
					},
					"summary": {
						"type": "string"
					},
					"display_name": {
						"type": "string"
					},
					"domain": {
						"type": "string"
					}
				},
				"required": [
					"name",
					"summary",
					"display_name",
					"domain"
				]
			},
			"PrivateUser": {
				"allOf": [
					{
						"$ref": "#/components/schemas/PublicUser"
					},
					{
						"type": "object",
						"properties": {
							"email": {
								"type": "string"
							}
						},
						"required": [
							"email"
						]
					}
				]
			},
			"PublicChannel": {
				"type": "object",
				"properties": {
					"id": {
						"type": "string"
					},
					"name": {
						"type": "string"
					},
					"domain": {
						"type": "string"
					}
				},
				"required": [
					"id",
					"name",
					"domain"
				]
			},
			"PrivateRelationship": {
				"type": "object",
				"properties": {
					"created": {
						"type": "string"
					},
					"from_id": {
						"type": "string"
					},
					"to_id": {
						"type": "string"
					},
					"type": {
						"type": "number"
					}
				},
				"required": [
					"created",
					"from_id",
					"to_id",
					"type"
				]
			},
			"PublicMessage": {
				"type": "object",
				"properties": {
					"id": {
						"type": "string"
					},
					"content": {
						"type": "string"
					},
					"published": {
						"type": "string"
					},
					"updated": {
						"type": "string"
					},
					"author_id": {
						"type": "string"
					},
					"channel_id": {
						"type": "string"
					}
				},
				"required": [
					"id",
					"content",
					"published",
					"updated",
					"author_id",
					"channel_id"
				]
			}
		},
		"parameters": {}
	},
	"paths": {
		"/nodeinfo/2.0.json/": {
			"get": {
				"summary": "",
				"responses": {
					"200": {
						"description": "",
						"content": {
							"application/json": {
								"schema": {
									"type": "object",
									"properties": {
										"version": {
											"type": "string"
										},
										"software": {
											"type": "object",
											"properties": {
												"name": {
													"type": "string"
												},
												"version": {
													"type": "string"
												},
												"homepage": {
													"type": "string"
												}
											},
											"required": [
												"name",
												"version",
												"homepage"
											]
										},
										"protocols": {
											"type": "array",
											"items": {
												"type": "string"
											}
										},
										"openRegistrations": {
											"type": "boolean"
										},
										"metadata": {
											"type": "object",
											"properties": {}
										}
									},
									"required": [
										"version",
										"software",
										"protocols",
										"openRegistrations",
										"metadata"
									]
								}
							}
						}
					}
				}
			}
		},
		"/auth/register": {
			"post": {
				"summary": "",
				"requestBody": {
					"content": {
						"application/json": {
							"schema": {
								"type": "object",
								"properties": {
									"username": {
										"type": "string"
									},
									"password": {
										"type": "string"
									},
									"email": {
										"type": "string"
									}
								},
								"required": [
									"username",
									"password"
								]
							}
						}
					}
				},
				"responses": {
					"200": {
						"description": "",
						"content": {
							"application/json": {
								"schema": {
									"type": "object",
									"properties": {
										"token": {
											"type": "string"
										}
									},
									"required": [
										"token"
									]
								}
							}
						}
					}
				}
			}
		},
		"/auth/login": {
			"post": {
				"summary": "",
				"requestBody": {
					"content": {
						"application/json": {
							"schema": {
								"type": "object",
								"properties": {
									"username": {
										"type": "string"
									},
									"password": {
										"type": "string"
									}
								},
								"required": [
									"username",
									"password"
								]
							}
						}
					}
				},
				"responses": {
					"200": {
						"description": "",
						"content": {
							"application/json": {
								"schema": {
									"type": "object",
									"properties": {
										"token": {
											"type": "string"
										},
										"user": {
											"$ref": "#/components/schemas/PublicUser"
										}
									},
									"required": [
										"token",
										"user"
									]
								}
							}
						}
					}
				}
			}
		},
		"/users/@me/": {
			"get": {
				"summary": "",
				"responses": {
					"200": {
						"description": "",
						"content": {
							"application/json": {
								"schema": {
									"$ref": "#/components/schemas/PrivateUser"
								}
							}
						}
					}
				}
			},
			"patch": {
				"summary": "",
				"requestBody": {
					"content": {
						"application/json": {
							"schema": {
								"type": "object",
								"properties": {
									"display_name": {
										"type": "string"
									},
									"summary": {
										"type": "string"
									}
								},
								"additionalProperties": false
							}
						}
					}
				},
				"responses": {
					"200": {
						"description": "",
						"content": {
							"application/json": {
								"schema": {
									"type": "object",
									"properties": {}
								}
							}
						}
					}
				}
			}
		},
		"/users/@me/channels/": {
			"get": {
				"summary": "",
				"responses": {
					"200": {
						"description": "",
						"content": {
							"application/json": {
								"schema": {
									"type": "array",
									"items": {
										"$ref": "#/components/schemas/PublicChannel"
									}
								}
							}
						}
					}
				}
			}
		},
		"/users/{user_id}/": {
			"get": {
				"summary": "",
				"parameters": [
					{
						"schema": {
							"type": "string"
						},
						"required": true,
						"name": "user_id",
						"in": "path"
					}
				],
				"responses": {
					"200": {
						"description": "",
						"content": {
							"application/json": {
								"schema": {
									"$ref": "#/components/schemas/PublicUser"
								}
							}
						}
					}
				}
			}
		},
		"/users/{user_id}/channels/": {
			"post": {
				"summary": "",
				"parameters": [
					{
						"schema": {
							"type": "string"
						},
						"required": true,
						"name": "user_id",
						"in": "path"
					}
				],
				"requestBody": {
					"content": {
						"application/json": {
							"schema": {
								"type": "object",
								"properties": {
									"name": {
										"type": "string"
									}
								},
								"required": [
									"name"
								]
							}
						}
					}
				},
				"responses": {
					"200": {
						"description": "",
						"content": {
							"application/json": {
								"schema": {
									"$ref": "#/components/schemas/PublicChannel"
								}
							}
						}
					}
				}
			}
		},
		"/users/{user_id}/relationship/": {
			"get": {
				"summary": "",
				"parameters": [
					{
						"schema": {
							"type": "string"
						},
						"required": true,
						"name": "user_id",
						"in": "path"
					}
				],
				"responses": {
					"200": {
						"description": "",
						"content": {
							"application/json": {
								"schema": {
									"$ref": "#/components/schemas/PrivateRelationship"
								}
							}
						}
					}
				}
			},
			"post": {
				"summary": "",
				"parameters": [
					{
						"schema": {
							"type": "string"
						},
						"required": true,
						"name": "user_id",
						"in": "path"
					}
				],
				"requestBody": {
					"content": {
						"application/json": {
							"schema": {
								"type": "object",
								"properties": {
									"type": {
										"anyOf": [
											{
												"type": "string",
												"enum": [
													"blocked"
												]
											},
											{
												"type": "string",
												"enum": [
													"pending"
												]
											}
										]
									}
								},
								"required": [
									"type"
								]
							}
						}
					}
				},
				"responses": {
					"200": {
						"description": "",
						"content": {
							"application/json": {
								"schema": {
									"$ref": "#/components/schemas/PrivateRelationship"
								}
							}
						}
					}
				}
			},
			"delete": {
				"summary": "",
				"parameters": [
					{
						"schema": {
							"type": "string"
						},
						"required": true,
						"name": "user_id",
						"in": "path"
					}
				],
				"responses": {
					"200": {
						"description": "",
						"content": {
							"application/json": {
								"schema": {
									"type": "object",
									"properties": {}
								}
							}
						}
					}
				}
			}
		},
		"/channel/{channel_id}/": {
			"get": {
				"summary": "",
				"parameters": [
					{
						"schema": {
							"type": "string"
						},
						"required": true,
						"name": "channel_id",
						"in": "path"
					}
				],
				"responses": {
					"200": {
						"description": "",
						"content": {
							"application/json": {
								"schema": {
									"type": "object",
									"properties": {}
								}
							}
						}
					}
				}
			},
			"patch": {
				"summary": "",
				"parameters": [
					{
						"schema": {
							"type": "string"
						},
						"required": true,
						"name": "channel_id",
						"in": "path"
					}
				],
				"requestBody": {
					"content": {
						"application/json": {
							"schema": {
								"type": "object",
								"properties": {
									"name": {
										"type": "string"
									}
								},
								"required": [
									"name"
								]
							}
						}
					}
				},
				"responses": {
					"200": {
						"description": "",
						"content": {
							"application/json": {
								"schema": {
									"type": "object",
									"properties": {}
								}
							}
						}
					}
				}
			}
		},
		"/channel/{channel_id}/messages/": {
			"post": {
				"summary": "",
				"parameters": [
					{
						"schema": {
							"type": "string"
						},
						"required": true,
						"name": "channel_id",
						"in": "path"
					}
				],
				"requestBody": {
					"content": {
						"application/json": {
							"schema": {
								"type": "object",
								"properties": {
									"content": {
										"type": "string"
									}
								},
								"required": [
									"content"
								]
							}
						}
					}
				},
				"responses": {
					"200": {
						"description": "",
						"content": {
							"application/json": {
								"schema": {
									"$ref": "#/components/schemas/PublicMessage"
								}
							}
						}
					}
				}
			},
			"get": {
				"summary": "",
				"parameters": [
					{
						"schema": {
							"type": "string"
						},
						"required": true,
						"name": "channel_id",
						"in": "path"
					},
					{
						"schema": {
							"type": "number",
							"maximum": 50,
							"minimum": 1,
							"default": 50
						},
						"required": false,
						"name": "limit",
						"in": "path"
					},
					{
						"schema": {
							"type": "string"
						},
						"required": false,
						"name": "after",
						"in": "path"
					},
					{
						"schema": {
							"type": "string"
						},
						"required": false,
						"name": "before",
						"in": "path"
					},
					{
						"schema": {
							"type": "string"
						},
						"required": false,
						"name": "around",
						"in": "path"
					}
				],
				"responses": {
					"200": {
						"description": "",
						"content": {
							"application/json": {
								"schema": {
									"type": "array",
									"items": {
										"$ref": "#/components/schemas/PublicMessage"
									}
								}
							}
						}
					}
				}
			}
		},
		"/channel/{channel_id}/messages/{message_id}/": {
			"get": {
				"summary": "",
				"parameters": [
					{
						"schema": {
							"type": "string"
						},
						"required": true,
						"name": "channel_id",
						"in": "path"
					},
					{
						"schema": {
							"type": "string"
						},
						"required": true,
						"name": "message_id",
						"in": "path"
					}
				],
				"responses": {
					"200": {
						"description": "",
						"content": {
							"application/json": {
								"schema": {
									"$ref": "#/components/schemas/PublicMessage"
								}
							}
						}
					}
				}
			}
		}
	}
}